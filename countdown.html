<script>
const timerEl = document.getElementById("timer");
const countdownBox = document.getElementById("countdownBox");
const wishBox = document.getElementById("wishBox");
const music = document.getElementById("music");

// ðŸ”§ FIXED TARGET DATE LOGIC
const now = new Date();
let year = now.getFullYear();

// June = 5 (JS months start from 0)
let target = new Date(year, 5, 8, 0, 0, 0);

// If today is AFTER June 8, use NEXT year
if (now >= target) {
  target = new Date(year + 1, 5, 8, 0, 0, 0);
}

let interval = setInterval(updateTimer, 1000);
updateTimer();

function updateTimer(){
  const now = new Date();
  const diff = target - now;

  if(diff <= 0){
    showWishes();
    return;
  }

  const d = Math.floor(diff / (1000*60*60*24));
  const h = Math.floor((diff / (1000*60*60)) % 24);
  const m = Math.floor((diff / (1000*60)) % 60);
  const s = Math.floor((diff / 1000) % 60);

  timerEl.innerText = `${d}d ${h}h ${m}m ${s}s`;
}

function showWishes(){
  clearInterval(interval);
  countdownBox.classList.add("hidden");
  wishBox.classList.remove("hidden");
  music.play().catch(()=>{});
  startRoses();
}

function startRoses(){
  for(let i=0;i<30;i++){
    const r = document.createElement("div");
    r.className = "rose";
    r.innerText = "ðŸŒ¹";
    r.style.left = Math.random()*100 + "vw";
    r.style.animationDuration = (4 + Math.random()*4) + "s";
    document.body.appendChild(r);
  }
}
</script>
